<!doctype html>
<html lang="sr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Pozivnica ü©µ</title>

<style>
:root{
  --light:#aeefff;
  --light2:#6fd4ff;
}

body{
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  color:#fff;
  overflow:hidden;
  background:#000;
}

/* ‚úÖ Fill sloj (popunjava ekran, mo≈æe da seƒçe, ali je blur) */
.bg-fill{
  position:fixed;
  inset:0;
  z-index:-3;
  background:url("photo.jpg") center/cover no-repeat;
  filter: blur(18px) brightness(.55);
  transform: scale(1.08);
}

/* ‚úÖ Glavni sloj: cela slika (bez seƒçenja) */
body::before{
  content:"";
  position:fixed;
  inset:0;
  z-index:-2;
  background:url("photo.jpg") center/contain no-repeat;
  filter: brightness(.95);
}

/* Overlay da tekst bude ƒçitljiv */
body::after{
  content:"";
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.35);
  z-index:-1;
}

/* Glass kartica */
.card{
  width:min(720px,94vw);
  padding:28px 22px 26px;
  border-radius:26px;
  background:rgba(255,255,255,0.14);
  border:1px solid rgba(255,255,255,0.28);
  backdrop-filter:blur(10px);
  text-align:center;
  box-shadow:0 20px 60px rgba(0,0,0,.55);
}

h1{
  margin:0;
  font-size:clamp(22px,3.8vw,40px);
  font-weight:900;
}

h2{
  margin:10px 0 0;
  font-size:clamp(16px,2.6vw,24px);
  font-weight:750;
  color:#e9fbff;
}

/* Srce */
.center{
  margin:22px auto 12px;
  display:flex;
  justify-content:center;
}

.big-heart{
  width:140px;
  height:140px;
  filter:drop-shadow(0 0 22px rgba(174,239,255,.9));
  cursor:pointer;
  transition:transform .2s ease;
}
.big-heart:hover{ transform:scale(1.08); }

/* Dugmad: DA levo, NE desno u velikoj zoni */
.row{
  margin-top:22px;
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:16px;
  align-items:center;
}

.yes-wrap{
  display:flex;
  justify-content:center;
}

button{
  border:none;
  padding:14px 24px;
  border-radius:16px;
  font-size:17px;
  font-weight:900;
  min-width:170px;
  box-shadow:0 12px 25px rgba(0,0,0,.35);
  cursor:pointer;
}

.yes-btn{
  background:linear-gradient(135deg,var(--light),var(--light2));
  color:#002233;
}

/* ‚úÖ VEƒÜA ZONA za NE (da ima gde da be≈æi) */
.no-zone{
  position:relative;
  height:140px;         /* veƒáe = bolje be≈æi */
  border-radius:18px;
  overflow:hidden;      /* nikad ne prelazi preko DA */
}

/* NE dugme */
.no-btn{
  position:absolute;
  left:50%;
  top:50%;
  transform:translate(-50%,-50%);
  background:rgba(255,255,255,.12);
  color:#fff;
  border:1px solid rgba(255,255,255,.25);
  backdrop-filter:blur(6px);
  pointer-events:none;  /* ne mo≈æe da se klikne */
}

/* Poruke */
.secret,.final{
  display:none;
  margin-top:16px;
  padding:14px;
  border-radius:18px;
  background:rgba(0,0,0,.35);
  border:1px solid rgba(255,255,255,.2);
  font-size:15px;
  color:#e6f7ff;
}

/* Slika koja se pojavi kad klikne DA */
#lovePhoto{
  display:none;
  margin:18px auto 0;
  width:min(520px,92%);
  border-radius:18px;
  border:2px solid rgba(255,255,255,0.25);
  box-shadow:0 15px 40px rgba(0,0,0,0.45);
}

#photoError{
  display:none;
  margin-top:10px;
  font-size:13px;
  color:#ffd3d3;
  opacity:.95;
}

@media(max-width:540px){
  .row{ grid-template-columns:1fr; }
  .no-zone{ height:170px; }
}
</style>
</head>

<body>
<div class="bg-fill"></div>

<div class="card">
  <h1>Pozivnica za moju najlep≈°u Sa≈°icu ü©µ</h1>
  <h2>Hoƒáe≈° li biti moja Valentine?</h2>

  <div class="center">
    <svg class="big-heart" viewBox="0 0 24 24" onclick="toggleSecret()">
      <path fill="#aeefff"
        d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5
           2 5.42 4.42 3 7.5 3
           9.24 3 10.91 3.81 12 5.08
           13.09 3.81 14.76 3 16.5 3
           19.58 3 22 5.42 22 8.5
           22 12.28 18.6 15.36 13.45 20.04z"/>
    </svg>
  </div>

  <div class="row">
    <div class="yes-wrap">
      <button class="yes-btn" onclick="acceptValentine()">DA ü©µ</button>
    </div>

    <div class="no-zone" id="noZone">
      <button class="no-btn" id="noBtn" type="button">Ne üòÖ</button>
    </div>
  </div>

  <div class="secret" id="secretBox">
    Sa≈°ice‚Ä¶ ti si moj najlep≈°i deo ≈æivota. ü©µ
  </div>

  <div class="final" id="finalBox"></div>

  <img id="lovePhoto" src="ds.jpg" alt="D + S">
  <div id="photoError">Ne mogu da uƒçitam <b>ds.jpg</b> ‚Äî proveri da li postoji u repo root-u i da li se zove taƒçno <b>ds.jpg</b>.</div>
</div>

<script>
const noBtn  = document.getElementById("noBtn");
const noZone = document.getElementById("noZone");

let pos = { x: 0.5, y: 0.5 }; // normalizovano (0..1)
let target = { x: 0.5, y: 0.5 };
let raf = null;

/* Postavi dugme po normalizovanoj poziciji */
function applyPos(nx, ny){
  const zone = noZone.getBoundingClientRect();
  const btn  = noBtn.getBoundingClientRect();

  const maxX = Math.max(0, zone.width  - btn.width);
  const maxY = Math.max(0, zone.height - btn.height);

  const x = nx * maxX;
  const y = ny * maxY;

  noBtn.style.left = x + "px";
  noBtn.style.top  = y + "px";
  noBtn.style.transform = "none";
}

/* ‚ÄúBe≈æi od kursora‚Äù: target se pomera U SUPROTNOM smeru od kursora */
function repel(clientX, clientY){
  const zone = noZone.getBoundingClientRect();
  const btn  = noBtn.getBoundingClientRect();

  // kursorska pozicija unutar zone (0..1)
  const mx = (clientX - zone.left) / zone.width;
  const my = (clientY - zone.top) / zone.height;

  // trenutni centar dugmeta (0..1)
  const cx = pos.x;
  const cy = pos.y;

  // vektor od mi≈°a ka dugmetu
  const dx = cx - mx;
  const dy = cy - my;

  // ako je mi≈° ba≈° blizu, pojaƒçaj be≈æanje
  const dist = Math.hypot(dx, dy);
  const strength = dist < 0.20 ? 0.35 : 0.22; // veƒáe = br≈æe/vi≈°e be≈æi

  // normalizuj
  const ndx = dx / (dist || 1);
  const ndy = dy / (dist || 1);

  // nova meta pozicija (gura se od mi≈°a)
  target.x = clamp(cx + ndx * strength, 0.02, 0.98);
  target.y = clamp(cy + ndy * strength, 0.06, 0.94);

  // dodaj malo random ‚Äúpanic‚Äù kad je ba≈° blizu
  if (dist < 0.16){
    target.x = clamp(target.x + (Math.random()-0.5)*0.35, 0.02, 0.98);
    target.y = clamp(target.y + (Math.random()-0.5)*0.35, 0.06, 0.94);
  }

  startAnim();
}

function clamp(v, a, b){ return Math.max(a, Math.min(b, v)); }

function startAnim(){
  if (raf) return;
  const step = () => {
    // brzo prati target (easing)
    pos.x += (target.x - pos.x) * 0.45;
    pos.y += (target.y - pos.y) * 0.45;

    applyPos(pos.x, pos.y);

    // stani kad je dovoljno blizu
    if (Math.abs(target.x - pos.x) < 0.002 && Math.abs(target.y - pos.y) < 0.002){
      raf = null;
      return;
    }
    raf = requestAnimationFrame(step);
  };
  raf = requestAnimationFrame(step);
}

/* pokreƒáe be≈æanje ƒçim si u zoni i dok se pomera≈° */
noZone.addEventListener("mouseenter", (e) => repel(e.clientX, e.clientY));
noZone.addEventListener("mousemove",  (e) => repel(e.clientX, e.clientY));

/* init centar */
window.addEventListener("load", () => applyPos(pos.x, pos.y));

function toggleSecret(){
  const box = document.getElementById("secretBox");
  box.style.display = (box.style.display === "block") ? "none" : "block";
}

function acceptValentine(){
  const final = document.getElementById("finalBox");
  const photo = document.getElementById("lovePhoto");
  const err   = document.getElementById("photoError");

  final.style.display = "block";
  final.innerHTML = "Moja Sa≈°ica ü©µ<br>Jedva ƒçekam na≈° dan.";

  // prika≈æi sliku; ako failuje, prika≈æi error
  err.style.display = "none";
  photo.style.display = "block";
  photo.onload = () => { err.style.display = "none"; };
  photo.onerror = () => { photo.style.display = "none"; err.style.display = "block"; };

  // nateraj refresh uƒçitavanja (cache buster)
  photo.src = "ds.jpg?v=" + Date.now();
}
</script>

</body>
</html>
