<!doctype html>
<html lang="sr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Pozivnica ü©µ</title>

<style>
:root{
  --light:#aeefff;
  --light2:#6fd4ff;
}

body{
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  color:#fff;
  background:#000;

  /* ‚úÖ bitno: da mo≈æe da se skroluje kad se pojavi slika */
  overflow:auto;
  padding: 18px 0; /* da kartica ne bude zalepljena za ivice na mobilu */
}

/* ‚úÖ JASNA POZADINA (bez blur) */
.bg{
  position:fixed;
  inset:0;
  z-index:-2;
  background:url("photo.jpg") center/cover no-repeat;
}

/* samo blagi overlay radi ƒçitljivosti */
body::after{
  content:"";
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.28);
  z-index:-1;
}

/* Glass kartica + skrol unutra ako je potrebno */
.card{
  width:min(720px,94vw);
  max-height: calc(100vh - 40px); /* da stane na ekran */
  overflow:auto;                  /* ‚úÖ ako je sadr≈æaj veƒái, skrol u kartici */
  -webkit-overflow-scrolling: touch;

  padding:28px 22px 26px;
  border-radius:26px;
  background:rgba(255,255,255,0.14);
  border:1px solid rgba(255,255,255,0.28);
  backdrop-filter:blur(10px);
  text-align:center;
  box-shadow:0 20px 60px rgba(0,0,0,.55);
}

h1{
  margin:0;
  font-size:clamp(22px,3.6vw,36px);
  font-weight:900;
}

h2{
  margin:10px 0 0;
  font-size:clamp(16px,2.6vw,24px);
  font-weight:750;
  color:#e9fbff;
}

/* Srce */
.center{
  margin:22px auto 12px;
  display:flex;
  justify-content:center;
}

.big-heart{
  width:140px;
  height:140px;
  filter:drop-shadow(0 0 22px rgba(174,239,255,.9));
  cursor:pointer;
  transition:transform .2s ease;
}
.big-heart:hover{ transform:scale(1.08); }

/* Dugmad: DA levo, NE desno (NE samo u svojoj zoni) */
.row{
  margin-top:22px;
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:16px;
  align-items:center;
}

.yes-wrap{
  display:flex;
  justify-content:center;
}

button{
  border:none;
  padding:14px 24px;
  border-radius:16px;
  font-size:17px;
  font-weight:900;
  min-width:170px;
  box-shadow:0 12px 25px rgba(0,0,0,.35);
  cursor:pointer;
}

.yes-btn{
  background:linear-gradient(135deg,var(--light),var(--light2));
  color:#002233;
}

/* ‚úÖ ogromna zona za NE da ima gde da be≈æi */
.no-zone{
  position:relative;
  height: 220px;     /* veliko */
  border-radius:18px;
  overflow:hidden;   /* nikad preko DA */
}

/* NE dugme */
.no-btn{
  position:absolute;
  left:50%;
  top:50%;
  transform:translate(-50%,-50%);
  background:rgba(255,255,255,.12);
  color:#fff;
  border:1px solid rgba(255,255,255,.25);
  backdrop-filter:blur(6px);

  /* ne mo≈æe da se klikne */
  pointer-events:none;
}

/* Poruke */
.secret,.final{
  display:none;
  margin-top:16px;
  padding:14px;
  border-radius:18px;
  background:rgba(0,0,0,.35);
  border:1px solid rgba(255,255,255,.2);
  font-size:15px;
  color:#e6f7ff;
}

/* ‚úÖ Slika posle DA ‚Äî uvek staje u karticu */
#lovePhoto{
  display:none;
  margin:18px auto 10px;
  width: min(520px, 95%);
  max-width: 100%;
  height: auto;           /* da ne seƒçe */
  border-radius:18px;
  border:2px solid rgba(255,255,255,0.25);
  box-shadow:0 15px 40px rgba(0,0,0,0.45);
}

#photoError{
  display:none;
  margin-top:10px;
  font-size:13px;
  color:#ffd3d3;
  opacity:.95;
}

@media(max-width:540px){
  .row{ grid-template-columns:1fr; }
  .no-zone{ height: 260px; } /* jo≈° veƒáe na telefonu */
}
</style>
</head>

<body>
<div class="bg"></div>

<div class="card" id="card">
  <h1>Pozivnica za moju najlep≈°u Sa≈°icu ü©µ</h1>
  <h2>Hoƒáe≈° li biti moja Valentine?</h2>

  <div class="center">
    <svg class="big-heart" viewBox="0 0 24 24" onclick="toggleSecret()">
      <path fill="#aeefff"
        d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5
           2 5.42 4.42 3 7.5 3
           9.24 3 10.91 3.81 12 5.08
           13.09 3.81 14.76 3 16.5 3
           19.58 3 22 5.42 22 8.5
           22 12.28 18.6 15.36 13.45 20.04z"/>
    </svg>
  </div>

  <div class="row">
    <div class="yes-wrap">
      <button class="yes-btn" onclick="acceptValentine()">DA ü©µ</button>
    </div>

    <div class="no-zone" id="noZone">
      <button class="no-btn" id="noBtn" type="button">Ne üòÖ</button>
    </div>
  </div>

  <div class="secret" id="secretBox">
    Sa≈°ice‚Ä¶ ti si moj najlep≈°i deo ≈æivota. ü©µ
  </div>

  <div class="final" id="finalBox"></div>

  <img id="lovePhoto" src="ds.jpg" alt="D + S">
  <div id="photoError">Ne mogu da uƒçitam <b>ds.jpg</b>. Proveri da li postoji u repo root-u i da li se zove taƒçno <b>ds.jpg</b>.</div>
</div>

<script>
const noBtn  = document.getElementById("noBtn");
const noZone = document.getElementById("noZone");
const card   = document.getElementById("card");

/* ‚úÖ Teleport: uvek daleko od mi≈°a */
function teleportFarFromMouse(clientX, clientY){
  const zone = noZone.getBoundingClientRect();
  const btn  = noBtn.getBoundingClientRect();

  const maxX = Math.max(0, zone.width  - btn.width);
  const maxY = Math.max(0, zone.height - btn.height);

  // mi≈° u koordinatama zone
  const mx = clamp(clientX - zone.left, 0, zone.width);
  const my = clamp(clientY - zone.top,  0, zone.height);

  // tra≈æimo poziciju ƒçiji je centar daleko od mi≈°a
  const minDist = Math.min(zone.width, zone.height) * 0.45; // daleko
  let best = {x: Math.random()*maxX, y: Math.random()*maxY};
  let bestD = -1;

  for(let i=0;i<25;i++){
    const x = Math.random()*maxX;
    const y = Math.random()*maxY;

    const cx = x + btn.width/2;
    const cy = y + btn.height/2;

    const d = Math.hypot(cx - mx, cy - my);

    // ako je dovoljno daleko, uzmi odmah
    if(d >= minDist){
      noBtn.style.left = x + "px";
      noBtn.style.top  = y + "px";
      noBtn.style.transform = "none";
      return;
    }

    // zapamti najbolju ako nijedna ne proƒëe prag
    if(d > bestD){
      bestD = d; best = {x,y};
    }
  }

  // fallback: najdalja koju smo na≈°li
  noBtn.style.left = best.x + "px";
  noBtn.style.top  = best.y + "px";
  noBtn.style.transform = "none";
}

function clamp(v,a,b){ return Math.max(a, Math.min(b, v)); }

/* Be≈æi ƒçim uƒëe≈° u zonu i dok se miƒçe≈° */
noZone.addEventListener("mouseenter", (e) => teleportFarFromMouse(e.clientX, e.clientY));
noZone.addEventListener("mousemove",  (e) => teleportFarFromMouse(e.clientX, e.clientY));

/* start pozicija */
window.addEventListener("load", () => {
  const z = noZone.getBoundingClientRect();
  const b = noBtn.getBoundingClientRect();
  noBtn.style.left = Math.max(0,(z.width - b.width)/2) + "px";
  noBtn.style.top  = Math.max(0,(z.height - b.height)/2) + "px";
  noBtn.style.transform = "none";
});

function toggleSecret(){
  const box = document.getElementById("secretBox");
  box.style.display = (box.style.display === "block") ? "none" : "block";
}

function acceptValentine(){
  const final = document.getElementById("finalBox");
  const photo = document.getElementById("lovePhoto");
  const err   = document.getElementById("photoError");

  final.style.display = "block";
  final.innerHTML = "Jeeeee... Najlep≈°i odgovor koji sam mogao da dobijem ljubavi. Sad si zvaniƒçno moja Valentine ü©µ.";
  err.style.display = "none";
  photo.style.display = "block";

  // cache-buster da uvek uƒçita najnoviju
  photo.onload = () => { err.style.display = "none"; };
  photo.onerror = () => { photo.style.display = "none"; err.style.display = "block"; };
  photo.src = "ds.jpg?v=" + Date.now();

  // ‚úÖ skroluj karticu do slike (da se vidi cela)
  setTimeout(() => {
    card.scrollTo({ top: card.scrollHeight, behavior: "smooth" });
  }, 80);
}
</script>
</body>
</html>
